{"version":3,"sources":["../src/jsdom-polyfills.ts"],"names":["document","createElement","getInnerText","node","Array","prototype","slice","call","childNodes","reduce","text","child","nodeType","TEXT_NODE","textContent","length","Object","defineProperty","HTMLElement","configurable","enumerable","get","set","textNodes","filter","forEach","removeChild","appendChild","ownerDocument","createTextNode","window","cancelAnimationFrame","hasWarnedAboutCancelAnimationFramePolyfill","console","warn"],"mappings":";;AAAA;;;;AAIA,IAAI,EAAE,eAAeA,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAjB,CAAJ,EAAmD;AACjD,QAAMC,YAAY,GAAIC,IAAD,IACnBC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BJ,IAAI,CAACK,UAAhC,EAA4CC,MAA5C,CAAmD,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAClE,QAAIA,KAAK,CAACC,QAAN,KAAmBD,KAAK,CAACE,SAA7B,EAAwC;AACtC,aAAQ,GAAEH,IAAK,GAAEC,KAAK,CAACG,WAAY,EAAnC;AACD;;AAED,QAAIH,KAAK,CAACH,UAAN,CAAiBO,MAArB,EAA6B;AAC3B,aAAQ,GAAEL,IAAK,GAAER,YAAY,CAACS,KAAD,CAAQ,EAArC;AACD;;AAED,WAAOD,IAAP;AACD,GAVD,EAUG,EAVH,CADF;;AAaAM,EAAAA,MAAM,CAACC,cAAP,CAAsBC,WAAW,CAACb,SAAlC,EAA6C,WAA7C,EAA0D;AACxDc,IAAAA,YAAY,EAAE,KAD0C;AAExDC,IAAAA,UAAU,EAAE,IAF4C;;AAGxDC,IAAAA,GAAG,GAAG;AACJ,aAAOnB,YAAY,CAAC,IAAD,CAAnB;AACD,KALuD;;AAMxDoB,IAAAA,GAAG,CAACZ,IAAD,EAAO;AACR,YAAMa,SAAS,GAAGnB,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CACfC,IADe,CACV,KAAKC,UADK,EAEfgB,MAFe,CAERrB,IAAI,IAAIA,IAAI,CAACS,QAAL,KAAkBT,IAAI,CAACU,SAFvB,CAAlB,CADQ,CAKR;;AACA,UAAIU,SAAS,CAACR,MAAV,KAAqB,CAAzB,EAA4B;AAC1BQ,QAAAA,SAAS,CAAC,CAAD,CAAT,CAAaT,WAAb,GAA2BJ,IAA3B;AACA;AACD,OATO,CAWR;;;AACAN,MAAAA,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2B,KAAKC,UAAhC,EAA4CiB,OAA5C,CAAoDtB,IAAI,IAAI,KAAKuB,WAAL,CAAiBvB,IAAjB,CAA5D,EAZQ,CAcR;;AACA,WAAKwB,WAAL,CAAiB,KAAKC,aAAL,CAAmBC,cAAnB,CAAkCnB,IAAlC,CAAjB;AACD;;AAtBuD,GAA1D;AAwBD;;AAED,IAAI,CAACoB,MAAM,CAACC,oBAAZ,EAAkC;AAChCD,EAAAA,MAAM,CAACC,oBAAP,GAA8B,MAAM;AAClC,QAAI,CAACD,MAAM,CAACE,0CAAZ,EAAwD;AACtDF,MAAAA,MAAM,CAACE,0CAAP,GAAoD,IAApD;AACAC,MAAAA,OAAO,CAACC,IAAR,CACE,mGADF;AAGD;AACF,GAPD;AAQD","sourcesContent":["/**\n * Polyfill DOMElement.innerText because JSDOM lacks support for it.\n * @link https://github.com/tmpvar/jsdom/issues/1245\n */\nif (!('innerText' in document.createElement('a'))) {\n  const getInnerText = (node: Node): string =>\n    Array.prototype.slice.call(node.childNodes).reduce((text, child) => {\n      if (child.nodeType === child.TEXT_NODE) {\n        return `${text}${child.textContent}`;\n      }\n\n      if (child.childNodes.length) {\n        return `${text}${getInnerText(child)}`;\n      }\n\n      return text;\n    }, '');\n\n  Object.defineProperty(HTMLElement.prototype, 'innerText', {\n    configurable: false,\n    enumerable: true,\n    get() {\n      return getInnerText(this);\n    },\n    set(text) {\n      const textNodes = Array.prototype.slice\n        .call(this.childNodes)\n        .filter(node => node.nodeType === node.TEXT_NODE);\n\n      // If there's only one child that is a text node, update it\n      if (textNodes.length === 1) {\n        textNodes[0].textContent = text;\n        return;\n      }\n\n      // Remove all child nodes as per WHATWG LS Spec\n      Array.prototype.slice.call(this.childNodes).forEach(node => this.removeChild(node));\n\n      // Append a single text child node with the text\n      this.appendChild(this.ownerDocument.createTextNode(text));\n    },\n  });\n}\n\nif (!window.cancelAnimationFrame) {\n  window.cancelAnimationFrame = () => {\n    if (!window.hasWarnedAboutCancelAnimationFramePolyfill) {\n      window.hasWarnedAboutCancelAnimationFramePolyfill = true;\n      console.warn(\n        'Warning! Test uses DOM cancelAnimationFrame API which is not available in JSDOM/Node environment.',\n      );\n    }\n  };\n}\n\ninterface Window {\n  hasWarnedAboutCancelAnimationFramePolyfill?: boolean;\n}\n"],"file":"jsdom-polyfills.js"}